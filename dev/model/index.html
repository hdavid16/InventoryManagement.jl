<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Supply Chain Model · InventoryManagement.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="InventoryManagement.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">InventoryManagement.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../events/">Sequence of Events</a></li><li><a class="tocitem" href="../policies/">Inventory Policies</a></li><li class="is-active"><a class="tocitem" href>Supply Chain Model</a><ul class="internal"><li><a class="tocitem" href="#Model-Assumptions"><span>Model Assumptions</span></a></li><li><a class="tocitem" href="#Model-Limitations"><span>Model Limitations</span></a></li><li><a class="tocitem" href="#Creating-a-Supply-Chain-Network"><span>Creating a Supply Chain Network</span></a></li><li><a class="tocitem" href="#Creating-a-Supply-Chain-Environment"><span>Creating a Supply Chain Environment</span></a></li><li><a class="tocitem" href="#Simulation-Outputs"><span>Simulation Outputs</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Supply Chain Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Supply Chain Model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/hdavid16/InventoryManagement.jl/blob/master/docs/src/model.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Model-Assumptions"><a class="docs-heading-anchor" href="#Model-Assumptions">Model Assumptions</a><a id="Model-Assumptions-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Assumptions" title="Permalink"></a></h2><p>The following assumptions hold in the current implementation, but can be modified in future releases.</p><ul><li>Production lead times are independent of the amount being produced.</li><li>Transportation costs are paid to a third party (not a node in the network).</li><li>Replenishment orders are placed in <a href="(https:/en.wikipedia.org/wiki/Topological_sorting)">topological order</a>. This means that upstream nodes place orders first. This allows the following scenario: if the lead time is 0, the ordered inventory will immediately be available so that the node can use it to fulfill downstream orders.</li></ul><h2 id="Model-Limitations"><a class="docs-heading-anchor" href="#Model-Limitations">Model Limitations</a><a id="Model-Limitations-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Limitations" title="Permalink"></a></h2><p>The following features are not currently supported:</p><ul><li>Alternate bills of materials (see <a href="#general-network-parameters">Model Inputs</a>) for the same material are not currently supported. This is particularly relevant for chemical systems (e.g., there are two reactions that can be used to make the same product).</li><li>Capacity limitations on shared feedstock inventory among <code>producer</code> nodes (e.g., shared inventory tanks) are not enforced in a straightforward way since <code>producer</code> nodes have dedicated raw material storage. Shared feedstock inventory can be modeled by having an upstream storage node with zero lead time to each of the <code>producer</code> nodes. Each of the <code>producer</code> nodes should use an <code>(s,S)</code> replenishment policy with <code>s = 0, S = 0</code>. When a production order is of size <code>x</code> is going to be placed in a period, the policy will assume the feedstock position at the <code>producer</code> node is going to derop to <code>-x</code> and will order <code>x</code> to bring the position up to <code>0</code>. Since the lead time is <code>0</code> and orders are placed with topological sorting (see <a href="../events/">Sequence of Events</a>), the inventory will be immediately sent to the <code>producer</code> node and be available for when the production order comes in. However, if there is not enough production capacity to process <code>x</code>, the excess will be left in the dedicated storage for that <code>producer</code> node, making it possible to violate the shared inventory capacity constraint.</li><li>If a <code>producer</code> can produce more than 1 material, it is possible for it to produce all materials it is capable of producing simultaneously (if there are enough raw materials). This occurs because the model does not account for resource constraints (e.g., single reactor can only do reaction 1 or reaction 2, but not both simultaneously). However, these can be enforced manually with the reorder actions. Potential fixes (requires changing the source code):<ul><li>Drop inventory capacities to 0 when the production equipment is occupied. Requires modeling each production unit as its own node.</li><li>Develop a production model (perhaps based on the Resource-Task Network paradigm)</li></ul></li></ul><h2 id="Creating-a-Supply-Chain-Network"><a class="docs-heading-anchor" href="#Creating-a-Supply-Chain-Network">Creating a Supply Chain Network</a><a id="Creating-a-Supply-Chain-Network-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-Supply-Chain-Network" title="Permalink"></a></h2><p>The supply network topology must be mapped on a network graph using <a href="https://github.com/JuliaGraphs/Graphs.jl">Graphs.jl</a>. The system parameters are stored in the network&#39;s metadata using <a href="https://github.com/JuliaGraphs/MetaGraphs.jl">MetaGraphs.jl</a>. The network can be generated by using the <code>MetaDiGraph</code> function and passing one of the following:</p><ul><li>Number of nodes in the network, which can the be connected via the <code>connect_nodes!</code> function:</li></ul><pre><code class="language-julia hljs">net = MetaDiGraph(3)
connect_nodes!(net,
  1 =&gt; 2,
  2 =&gt; 3
)</code></pre><ul><li>An adjacency matrix for the network:</li></ul><pre><code class="language-julia hljs">net = MetaDiGraph(
  [0 1 0;
   0 0 1;
   0 0 0]
)</code></pre><ul><li>An existing <code>DiGraph</code>, such as a serial directed graph (<code>path_digraph</code>):</li></ul><pre><code class="language-julia hljs">net = MetaDiGraph(path_digraph(3))</code></pre><p>General network, node-specific, and arc-specific metadata can be added using the <code>set_prop!</code> and <code>set_props!</code> functions. The following subsections describe the property keys accepted for the supply chain network metadata.</p><h3 id="General-Network-Parameters"><a class="docs-heading-anchor" href="#General-Network-Parameters">General Network Parameters</a><a id="General-Network-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#General-Network-Parameters" title="Permalink"></a></h3><p>The graph metadata should have the following fields in its metadata:</p><ul><li><code>:materials::Vector</code> with a list of all materials in the system.</li></ul><h3 id="Node-specific-Parameters"><a class="docs-heading-anchor" href="#Node-specific-Parameters">Node-specific Parameters</a><a id="Node-specific-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Node-specific-Parameters" title="Permalink"></a></h3><p><code>Producers</code> will have the following fields in their node metadata:</p><ul><li><code>:initial_inventory::Dict</code>: initial inventory for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:inventory_capacity::Dict</code>: maximum inventory for each material (<code>keys</code>). Default = <code>Inf</code>.</li><li><code>:holding_cost::Dict</code>: unit holding cost for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:early_fulfillment::Dict</code>: (<em>only when the node has at least 1 supplier</em>) (<code>true</code>/<code>false</code>) on if the node accepts orders being fulfilled before their due date for each material (<code>keys</code>). Default = <code>true</code>.</li><li><code>:partial_fulfillment::Dict</code>: (<em>only when the node has at least 1 supplier</em>) (<code>true</code>/<code>false</code>) on if the node accepts orders being fulfilled partially for each material (<code>keys</code>). Default = <code>true</code>.</li><li><code>:supplier_priority::Dict</code>: (<em>only when the node has at least 1 supplier</em>) <code>Vector</code> of suppliers (from high to low priority) for each material (<code>keys</code>). When a request cannot be fulfilled due to insufficient production capacity or on-hand inventory, the system will try to reallocate it to the supplier that is next in line on the priority list (if <code>reallocate = true</code>). Default = <code>inneighbors(SupplyChainEnv.network, node)</code>.</li><li><code>:production_capacity::Dict</code>: maximum production capacity for each material (<code>keys</code>). Default = <code>Inf</code>.</li><li><code>:bill_of_materials::Union{Dict,NamedArray}</code>: <code>keys</code> are material <code>Tuples</code>, where the first element is the input material and the second element is the product/output material; the <code>values</code> indicate the amount of input material consumed to produce 1 unit of output material. Alternatively, a <code>NamedArray</code> can be passed where the input materials are the rows and the output materials are the columns. The following convention is used for the bill of material (BOM) values:<ul><li><code>zero</code>: input not involved in production of output.</li><li><code>negative number</code>: input is consumed in the production of output.</li><li><code>positive number</code>: input is a co-product of the output.</li></ul></li></ul><p><code>Distributors</code> will have the following fields in their node metadata:</p><ul><li><code>:initial_inventory::Dict</code>: initial inventory for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:inventory_capacity::Dict</code>: maximum inventory for each material (<code>keys</code>). Default = <code>Inf</code>.</li><li><code>:holding_cost::Dict</code>: unit holding cost for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:early_fulfillment::Dict</code>: (<em>only when the node has at least 1 supplier</em>) (<code>true</code>/<code>false</code>) on if the node accepts orders being fulfilled before their due date for each material (<code>keys</code>). Default = <code>true</code>.</li><li><code>:partial_fulfillment::Dict</code>: (<em>only when the node has at least 1 supplier</em>) (<code>true</code>/<code>false</code>) on if the node accepts orders being fulfilled partially for each material (<code>keys</code>). Default = <code>true</code>.</li><li><code>:supplier_priority::Dict</code>: (<em>only when the node has at least 1 supplier</em>) <code>Vector</code> of supplier priorities (from high to low) for each material (<code>keys</code>). When a request cannot be fulfilled due to insufficient productio capacity or on-hand inventory, the system will try to reallocate it to the supplier that is next in line on the priority list (if <code>reallocate = true</code>). Default = <code>inneighbors(SupplyChainEnv.network, node)</code>.</li></ul><p><code>Markets</code> will have the following fields in their node metadata:</p><ul><li><code>:initial_inventory::Dict</code>: initial inventory for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:inventory_capacity::Dict</code>: maximum inventory for each material (<code>keys</code>). Default = <code>Inf</code>.</li><li><code>:holding_cost::Dict</code>: unit holding cost for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:early_fulfillment::Dict</code>: (<em>only when the node has at least 1 supplier</em>) (<code>true</code>/<code>false</code>) on if the node accepts orders being fulfilled before their due date for each material (<code>keys</code>). Default = <code>true</code>.</li><li><code>:partial_fulfillment::Dict</code>: (<em>only when the node has at least 1 supplier</em>) (<code>true</code>/<code>false</code>) on if the node accepts orders being fulfilled partially for each material (<code>keys</code>). Default = <code>true</code>.</li><li><code>:supplier_priority::Dict</code>: (<em>only when the node has at least 1 supplier</em>) <code>Vector</code> of supplier priorities (from high to low) for each material (<code>keys</code>). When a request cannot be fulfilled due to insufficient productio capacity or on-hand inventory, the system will try to reallocate it to the supplier that is next in line on the priority list (if <code>reallocate = true</code>). Default = <code>inneighbors(SupplyChainEnv.network, node)</code>.</li><li><code>:demand_distribution::Dict</code>: probability distributions from <a href="https://github.com/JuliaStats/Distributions.jl">Distributions.jl</a> for the market demands for each material (<code>keys</code>). For deterministic demand, instead of using a probability distribution, use <code>D where D &lt;: Number</code>. Default = <code>0</code>.</li><li><code>:demand_frequency::Dict</code>: number of times demand occurs per period on average for each material (<code>keys</code>). Default = <code>1</code>.</li><li><code>:sales_price::Dict</code>: market sales price for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:unfulfilled_penalty::Dict</code>: unit penalty for unsatisfied market demand for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:service_lead_time::Dict</code>: service lead time (probability distribution or deterministic value) allowed to fulfill market demand for each material (<code>keys</code>). Default = <code>0</code>.</li></ul><h3 id="Arc-specific-Parameters"><a class="docs-heading-anchor" href="#Arc-specific-Parameters">Arc-specific Parameters</a><a id="Arc-specific-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Arc-specific-Parameters" title="Permalink"></a></h3><p>All arcs have the following fields in their metadata:</p><ul><li><code>:sales_price::Dict</code>: unit sales price for inventory sent on that edge (from supplier to receiver) for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:transportation_cost::Dict</code>: unit transportation cost for shipped inventory for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:pipeline_holding_cost::Dict</code>: unit holding cost per period for inventory in-transit for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:unfulfilled_penalty::Dict</code>: unit penalty for unsatisfied internal demand for each material (<code>keys</code>). Default = <code>0</code>.</li><li><code>:lead_time::Distribution{Univariate, Discrete}</code>: probability distributions from <a href="https://github.com/JuliaStats/Distributions.jl">Distributions.jl</a> for the lead times for each material (<code>keys</code>) on that edge. Lead times are transportation times when the edge has two <code>distributor</code> nodes and production times when the edge joins the <code>producer</code> and <code>distributor</code> nodes in a plant. For deterministic lead times, instead of using a probability distribution, use <code>L where L  &lt;: Number</code>. Default = <code>0</code>.</li><li><code>:service_lead_time::Dict</code>: service lead time (probability distribution or deterministic value) allowed to fulfill internal demand for each material (<code>keys</code>). Default = <code>0</code>.</li></ul><h2 id="Creating-a-Supply-Chain-Environment"><a class="docs-heading-anchor" href="#Creating-a-Supply-Chain-Environment">Creating a Supply Chain Environment</a><a id="Creating-a-Supply-Chain-Environment-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-Supply-Chain-Environment" title="Permalink"></a></h2><p>The <code>SupplyChainEnv</code> function can be used to create a <code>SupplyChainEnv</code> Constructor. This function takes the following inputs:</p><ul><li>Positional Arguments:<ul><li><code>Network::MetaDiGraph</code>: supply chain network with embedded metadata</li><li><code>num_periods::Int</code>: number of periods to simulate</li></ul></li><li>Keyword Arguments (system options):<ul><li><code>backlog::Bool = true</code>: backlogging allowed if <code>true</code>; otherwise, orders that reach their due date and are not fulfilled become lost sales.</li><li><code>reallocate::Bool = false</code>: the system try to reallocate requests if they cannot be satisfied if <code>true</code>; otherwise, no reallocation is attempted.</li><li><code>guaranteed_service::Bool = false</code>: the simulation will operate under the assumptions in the Guaranteed Service Model (<a href="https://www.sciencedirect.com/science/article/pii/S1474667016333535">GSM</a>). If <code>true</code>, <code>backlog = true</code> will be forced. Orders that are open and within the service lead time window will be backlogged. Once the service lead time expires, the orders become lost sales. In order to replicate the GSM assumption that extraordinary measures will be used to fulfill any expired orders, a dummy node with infinite supply can be attached to each node and set as the lowest priority supplier to that node.</li><li><code>adjusted_stock::Bool = true</code>: the simulation will discount orders that have been placed, but have not been fulfilled from the inventory position (and echelon stock) from the supplier node, and will add them to the on-order inventory of the requested node.</li><li><code>capacitated_inventory::Bool = true</code>: the simulation will enforce inventory capacity constraints by discarding excess inventory at the end of each period if <code>true</code>; otherwise, the system will allow the inventory to exceed the specified capacity.</li><li><code>evaluate_profit::Bool = true</code>: the simulation will calculate the proft at each node if <code>true</code> and save the results in <code>SupplyChainEnv.profit</code>.</li></ul></li><li>Aditional Keyword Arguments:<ul><li><code>discount::Float64 = 0.</code>: discount factor (i.e., interest rate) to account for the time-value of money.</li><li><code>seed::Int = 0</code>: random seed for simulation.</li></ul></li></ul><h2 id="Simulation-Outputs"><a class="docs-heading-anchor" href="#Simulation-Outputs">Simulation Outputs</a><a id="Simulation-Outputs-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation-Outputs" title="Permalink"></a></h2><p>The <code>SupplyChainEnv</code> Constructor has the following fields to store the simulation results in <code>DataFrames</code>:</p><ul><li><code>inventory_on_hand</code>: on-hand inventory for each <code>node</code>, <code>material</code>, and <code>period</code>. Discarded inventory is marked when <code>capacitated_inventory = true</code></li><li><code>inventory_level</code>: inventory level for each <code>node</code>, <code>material</code>, and <code>period</code></li><li><code>inventory_pipeline</code>: in-transit inventory for each <code>arc</code>, <code>material</code>, and <code>period</code></li><li><code>inventory_position</code>: inventory position for each <code>node</code>, <code>material</code>, and <code>period</code></li><li><code>echelon_stock</code>: inventory position for each <code>echelon</code>, <code>material</code>, and <code>period</code></li><li><code>demand</code>: internal and external demands for each <code>material</code> on each <code>arc</code> (for internal demand) and each <code>node</code> (for external demand), at each <code>period</code>. The total demand quantities, fulfilled demand quantities, lead times and unfulfilled demand quantities are tabulated. If <code>reallocate = true</code> and the unfulfilled demand is reallocated, the <code>arc</code> that the demand is reallocated to is also indicated.</li><li><code>orders</code>: internal and external orders for each <code>material</code> on each <code>arc</code> (for internal demand) and each <code>node</code> (for external demand). The ID, creation date, and quantity are stored for each order. The <code>fulfilled</code> column has a vector of <code>Tuples</code> that indicate the fulfillment time, supplier, and amount fulfilled. More than one <code>Tuple</code> will be shown if the order has been split.</li><li><code>open_orders</code>: open (not yet fulfilled) internal and external orders for each <code>material</code> on each <code>arc</code> (for internal demand) and each <code>node</code> (for external demand). The ID, creation date, and quantity are stored for each open order. The <code>due</code> column indicates the time left until the order is due (as specified by the <code>service_lead_time</code>).</li><li><code>shipments</code>: current in-transit inventory for each <code>arc</code> and <code>material</code> with remaining lead time.</li><li><code>profit</code>: time-discounted profit for each <code>node</code> at each <code>period</code>.</li><li><code>metrics</code>: service metrics (service level and fillrate) for each <code>supplier</code> and <code>material</code>.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../policies/">« Inventory Policies</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.18 on <span class="colophon-date" title="Saturday 4 June 2022 06:27">Saturday 4 June 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
